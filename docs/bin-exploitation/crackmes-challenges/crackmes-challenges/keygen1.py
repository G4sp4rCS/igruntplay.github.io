#!/usr/bin/env python3

def rol32(v, s):
    return ((v << s) | (v >> (32 - s))) & 0xFFFFFFFF

def hash_func(name, seed):
    r = 0x97829737  # Valor correcto!
    i = 1
    while i <= len(name):
        r ^= ord(name[i - 1])
        r = (r * 0x5BD1E995) & 0xFFFFFFFF
        r = rol32(r, 5)
        r ^= seed
        i += 1
    return r

def generate_serial(name):
    """Genera el serial correcto"""
    h1 = hash_func(name, 0x55AA55AA)
    h2 = hash_func(name, h1)
    return f"{h1:08X}-{h2:08X}"

if __name__ == "__main__":
    import sys
    
    if len(sys.argv) > 1:
        name = ' '.join(sys.argv[1:])
    else:
        name = input("Name: ").strip()
    
    if name:
        serial = generate_serial(name)
        print(f"\nName:   {name}")
        print(f"Serial: {serial}")
    else:
        print("Error: Name cannot be empty")